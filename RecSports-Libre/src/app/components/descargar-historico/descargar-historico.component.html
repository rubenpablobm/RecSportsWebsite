<!-- Descripcion de descargar-historico.component.html: programa que define la estructura del componente
"descargar-hisotrico". Su proposito es permitir al administrador descargar los datos históricos del aforo. 
Porpiedad del equipo WellSoft. 
Ultima edicion por: Arturo Garza Campuzano.
Fecha de creacion: 09/06/2023
Fecha de modificacion: 15/06/2023 -->

<app-navbar></app-navbar>
<div class="container m-4">
  <!-- Titulo -->
  <h1 class="fw-bold fs-1">Descargar histórico (Estadísticas)</h1>
  <div>
    <button class="btn btn-secondary m-2" routerLink="/">Regresar</button>
  </div>
  <mat-form-field class="mx-2">
    <mat-label>Select an option</mat-label>
    <mat-select [(value)]="selected">
      <mat-option>None</mat-option>
      <ng-container *ngFor="let area of listaAreas">
        <ng-container *ngIf="area.Tipo === 'Aforo'">
          <mat-option value="{{ area.IdArea }}"
            >{{ area.IdEdificio }} > {{ area.Nombre }}</mat-option
          >
        </ng-container>
      </ng-container>

      <mat-option value="0">TODOS</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field class="mx-2">
    <mat-label>Enter a date range</mat-label>
    <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
      <input matStartDate formControlName="start" placeholder="Start date" />
      <input matEndDate formControlName="end" placeholder="End date" />
    </mat-date-range-input>
    <mat-hint>MM/DD/YYYY – MM/DD/YYYY</mat-hint>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>

    <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')"
      >Invalid start date</mat-error
    >
    <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
      >Invalid end date</mat-error
    >
  </mat-form-field>

  <div>
    <button
      (click)="getEstadisticaHora()"
      class="btn btn-secondary m-2 font"
      type="submit"
    >
      Descargar CSV por hora
    </button>
    <button
      (click)="getEstadisticaDia()"
      class="btn btn-secondary m-2 font"
      type="submit2"
    >
      Descargar CSV acumulado diario
    </button>
  </div>
</div>
